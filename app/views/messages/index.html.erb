<section class="chat-wrap">
  <!-- Live updates -->
  <%= turbo_stream_from [@partnership, :messages] %>
  <!-- Header -->
  <header class="chat-header">
    <h1 class="chat-title">Coach Chat</h1>
  </header>
  <!-- Messages (single scroll container) -->
  <div id="messages-body"
       class="chat-messages"
       data-controller="autoscroll"
       data-turbo-preserve-scroll>
    <%= render partial: "messages/message",
               collection: @messages,
               as: :message %>
  </div>
  <!-- Status strip -->
  <div class="chat-status">
    <%= render "messages/thinking_badge" %>
    <%= render "messages/error_badge" %>
  </div>
  <!-- Composer -->
  <footer class="chat-composer" id="new_message">
    <div class="chat-status">
      <%= render "messages/thinking_badge" %>
      <%= render "messages/error_badge" %>
    </div>
    <%= render partial: "messages/form",
               locals: { partnership: @partnership, message: @message } %>
  </footer>
</section>
